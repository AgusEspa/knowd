{"ast":null,"code":"var _jsxFileName = \"/Users/agusespa/Programming/Projects/self-okrs-ui/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Home from \"./components/Home/Home\";\nimport Dashboard from './components/Dashboard/Dashboard';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [accessToken, setAccessToken] = useState('');\n  const [refreshToken, setRefreshToken] = useState('');\n  const [username, setUsername] = useState('Username');\n  useEffect(() => {\n    const fetchedAccessToken = window.localStorage.getItem(\"access_token\");\n    setAccessToken(fetchedAccessToken);\n    const fetchedRefreshToken = window.localStorage.getItem(\"refresh_token\");\n    setRefreshToken(fetchedRefreshToken);\n  }, []);\n  useEffect(() => {\n    setUsername(getUsername(accessToken));\n  }, [accessToken]);\n\n  const getUsername = currentAccessToken => {\n    const token = `bearer ${currentAccessToken}`;\n    const config = {\n      headers: {\n        Authorization: token\n      }\n    };\n    const response = axios.get(\"/api/users/authenticated\", config);\n    return response.data;\n  };\n\n  if (accessToken === '' || accessToken === null || accessToken === undefined) {\n    return /*#__PURE__*/_jsxDEV(Home, {\n      setAccessToken: setAccessToken,\n      setRefreshToken: setRefreshToken\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Dashboard, {\n      username: username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(App, \"xFnJpKVol7e/VGnuujmur2tCx9c=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/agusespa/Programming/Projects/self-okrs-ui/src/App.js"],"names":["useState","useEffect","Home","Dashboard","axios","App","accessToken","setAccessToken","refreshToken","setRefreshToken","username","setUsername","fetchedAccessToken","window","localStorage","getItem","fetchedRefreshToken","getUsername","currentAccessToken","token","config","headers","Authorization","response","get","data","undefined"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AAEb,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,UAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMW,kBAAkB,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAA3B;AACAR,IAAAA,cAAc,CAACK,kBAAD,CAAd;AACA,UAAMI,mBAAmB,GAAGH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAA5B;AACAN,IAAAA,eAAe,CAACO,mBAAD,CAAf;AACD,GALQ,EAKN,EALM,CAAT;AAOAf,EAAAA,SAAS,CAAC,MAAM;AACZU,IAAAA,WAAW,CAACM,WAAW,CAACX,WAAD,CAAZ,CAAX;AACH,GAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;;AAIA,QAAMW,WAAW,GAAIC,kBAAD,IAAwB;AAC1C,UAAMC,KAAK,GAAI,UAASD,kBAAmB,EAA3C;AACA,UAAME,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAEH;AAAjB;AADI,KAAf;AAGA,UAAMI,QAAQ,GAAGnB,KAAK,CAACoB,GAAN,CAAU,0BAAV,EAAsCJ,MAAtC,CAAjB;AACA,WAAOG,QAAQ,CAACE,IAAhB;AACD,GAPD;;AASA,MAAInB,WAAW,KAAK,EAAhB,IAAsBA,WAAW,KAAK,IAAtC,IAA8CA,WAAW,KAAKoB,SAAlE,EAA6E;AAC3E,wBACE,QAAC,IAAD;AACE,MAAA,cAAc,EAAEnB,cADlB;AAEE,MAAA,eAAe,EAAEE;AAFnB;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GAND,MAMO;AACL,wBACE,QAAC,SAAD;AACE,MAAA,QAAQ,EAAEC;AADZ;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;AACF;;GAvCQL,G;;KAAAA,G;AAyCT,eAAeA,GAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport Home from \"./components/Home/Home\";\nimport Dashboard from './components/Dashboard/Dashboard';\nimport axios from 'axios';\n\nfunction App() {\n\n  const [accessToken, setAccessToken] = useState('');\n  const [refreshToken, setRefreshToken] = useState('');\n  const [username, setUsername] = useState('Username');\n\n  useEffect(() => {\n    const fetchedAccessToken = window.localStorage.getItem(\"access_token\");\n    setAccessToken(fetchedAccessToken);\n    const fetchedRefreshToken = window.localStorage.getItem(\"refresh_token\");\n    setRefreshToken(fetchedRefreshToken);\n  }, []);\n\n  useEffect(() => {\n      setUsername(getUsername(accessToken))\n  }, [accessToken]);\n\n  const getUsername = (currentAccessToken) => {\n    const token = `bearer ${currentAccessToken}`;\n    const config = {\n      headers: { Authorization: token },\n    }\n    const response = axios.get(\"/api/users/authenticated\", config);\n    return response.data;\n  }\n  \n  if (accessToken === '' || accessToken === null || accessToken === undefined) {\n    return (\n      <Home \n        setAccessToken={setAccessToken}\n        setRefreshToken={setRefreshToken}/> \n    );\n  } else {\n    return (\n      <Dashboard \n        username={username}\n      />\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}