{"ast":null,"code":"var _jsxFileName = \"/Users/agusespa/Programming/Projects/self-okrs-ui/src/context/AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, createContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useAxios from \"../utils/useAxios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(null);\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [userAuth, setUserAuth] = useState({});\n  const api = useAxios();\n  useEffect(() => {\n    const credentials = getCredentials();\n    setUserAuth(() => ({\n      username: credentials.username,\n      emailAddress: credentials.emailAddress,\n      accessToken: window.localStorage.getItem(\"access_token\"),\n      refreshToken: window.localStorage.getItem(\"refresh_token\")\n    }));\n  }, []);\n\n  const getCredentials = async () => {\n    try {\n      const response = await api.get(\"/users/authenticated\");\n      return response.data;\n    } catch (error) {\n      console.log(`Request failed: ${error.response.data.error_message}`);\n    }\n  };\n\n  const logout = () => {\n    setUserAuth([]);\n    window.localStorage.clear();\n    navigate(\"/login\");\n  };\n\n  console.log(\"effect\");\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      userAuth,\n      setUserAuth,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 3\n  }, this);\n};\n\n_s(AuthProvider, \"Rq3BCGFcn7pR4UtIOQvDTgid65U=\", false, function () {\n  return [useNavigate, useAxios];\n});\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/agusespa/Programming/Projects/self-okrs-ui/src/context/AuthContext.js"],"names":["useState","useEffect","createContext","useNavigate","useAxios","AuthContext","AuthProvider","children","navigate","userAuth","setUserAuth","api","credentials","getCredentials","username","emailAddress","accessToken","window","localStorage","getItem","refreshToken","response","get","data","error","console","log","error_message","logout","clear"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,aAA9B,QAAmD,OAAnD;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,QAAP,MAAqB,mBAArB;;AAEA,OAAO,MAAMC,WAAW,gBAAGH,aAAa,CAAC,IAAD,CAAjC;AAEP,OAAO,MAAMI,YAAY,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AAE7C,QAAMC,QAAQ,GAAGL,WAAW,EAA5B;AAEA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AAEG,QAAMW,GAAG,GAAGP,QAAQ,EAApB;AAEHH,EAAAA,SAAS,CAAE,MAAM;AAChB,UAAMW,WAAW,GAAGC,cAAc,EAAlC;AAEMH,IAAAA,WAAW,CAAE,OAAO;AACzBI,MAAAA,QAAQ,EAAEF,WAAW,CAACE,QADG;AAEzBC,MAAAA,YAAY,EAAEH,WAAW,CAACG,YAFD;AAGzBC,MAAAA,WAAW,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAHY;AAIzBC,MAAAA,YAAY,EAAEH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B;AAJW,KAAP,CAAF,CAAX;AAMH,GATK,EASH,EATG,CAAT;;AAWA,QAAMN,cAAc,GAAG,YAAY;AAE5B,QAAI;AACA,YAAMQ,QAAQ,GAAG,MAAMV,GAAG,CAACW,GAAJ,CAAQ,sBAAR,CAAvB;AACT,aAAOD,QAAQ,CAACE,IAAhB;AAEM,KAJD,CAIE,OAAOC,KAAP,EAAc;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBF,KAAK,CAACH,QAAN,CAAeE,IAAf,CAAoBI,aAAc,EAAjE;AACT;AACE,GATJ;;AAWA,QAAMC,MAAM,GAAG,MAAM;AACpBlB,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAO,IAAAA,MAAM,CAACC,YAAP,CAAoBW,KAApB;AACArB,IAAAA,QAAQ,CAAC,QAAD,CAAR;AACA,GAJD;;AAMAiB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAEA,sBACC,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEjB,MAAAA,QAAF;AAAYC,MAAAA,WAAZ;AAAyBkB,MAAAA;AAAzB,KAA7B;AAAA,cACErB;AADF;AAAA;AAAA;AAAA;AAAA,UADD;AAKA,CA3CM;;GAAMD,Y;UAEKH,W,EAIFC,Q;;;KANHE,Y","sourcesContent":["import { useState, useEffect, createContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useAxios from \"../utils/useAxios\";\n\nexport const AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n\n\tconst navigate = useNavigate();\n\n\tconst [userAuth, setUserAuth] = useState({});\n\n    const api = useAxios();\n\n\tuseEffect( () => {\n\t\tconst credentials = getCredentials();\n\n        setUserAuth( () => ({\n\t\t\tusername: credentials.username,\n\t\t\temailAddress: credentials.emailAddress,\n\t\t\taccessToken: window.localStorage.getItem(\"access_token\"),\n\t\t\trefreshToken: window.localStorage.getItem(\"refresh_token\")}\n\t\t));\n    }, []);\n\n\tconst getCredentials = async () => {\n\n        try {\n            const response = await api.get(\"/users/authenticated\");\n\t\t\treturn response.data;\n            \n        } catch (error) {\n            console.log(`Request failed: ${error.response.data.error_message}`);\n\t\t}\n    };\n\n\tconst logout = () => {\n\t\tsetUserAuth([]);\n\t\twindow.localStorage.clear();\n\t\tnavigate(\"/login\");\n\t}\n\n\tconsole.log(\"effect\");\n\n\treturn(\n\t\t<AuthContext.Provider value={{ userAuth, setUserAuth, logout }} >\n\t\t\t{children}\n\t\t</AuthContext.Provider>\n\t);\n}\n "]},"metadata":{},"sourceType":"module"}